---
title: å·¥ä½œä¸­é‡åˆ°çš„é—®é¢˜è®°å½•
tags:
  - å·¥ä½œ
categories:
  - å‰ç«¯
  - å·¥ä½œ
date: 2021-01-20 12:09:47
keywords:
  - React
  - Vue æ»šåŠ¨ç©¿é€
  - mac ä½¿ç”¨æŠ€å·§
  - Dockerå®¹å™¨
  - å¾®ä¿¡å°ç¨‹åº
  - ç§»åŠ¨ç«¯é€‚é…æ–¹æ¡ˆ
description: ä¸»è¦è®°å½•äº†æˆ‘å·¥ä½œä¸€å¹´æ¥é‡åˆ°çš„ä¸€äº›å›°éš¾ä»¥åŠè§£å†³æ–¹æ³•
authors: Alan
---

ä¸»è¦è®°å½•äº†æˆ‘å·¥ä½œä¸€å¹´æ¥é‡åˆ°çš„ä¸€äº›å›°éš¾ä»¥åŠè§£å†³æ–¹æ³•ã€‚

<!-- truncate -->

## Vue

### æ»šåŠ¨ç©¿é€

`@touchmove.stop`

## React

- react-router-dom ä¸­çš„ switchï¼šhttps://segmentfault.com/a/1190000022444683

- localstorage å’Œ sessionstorage ç”Ÿå‘½å‘¨æœŸ

- åœ¨ useEffect ä¸­ä½¿ç”¨ä¸€æ­¥å‡½æ•°

  ```jsx
  useEffect(() => {
    (async () => {
      await xxx;
    })();
  }, []);
  ```

### react ä¸­ä½¿ç”¨ defaultProps

https://stackoverflow.com/questions/37282159/default-property-value-in-react-component-using-typescript

## CSS

### pre ä¸èƒ½æ¢è¡Œçš„é—®é¢˜

```css
pre {
  white-space: pre-wrap;
  word-break: break-all;
}
```

### ç§»åŠ¨ç«¯ hover é—®é¢˜

https://stackoverflow.com/questions/23885255/how-to-remove-ignore-hover-css-style-on-touch-devices

### text-decoration çš„ä¼ æ’­æ€§é—®é¢˜

https://stackoverflow.com/questions/40829232/why-does-the-text-decoration-none-not-work-inside-p

## å¾…å­¦ä¹ 

- git çš„ fast-forword
- [cherry-pick](https://ruanyifeng.com/blog/2020/04/git-cherry-pick.html)
- [github fork](https://www.zhihu.com/question/20431718)

## mac ä½¿ç”¨ä»¥åŠ vscode æŠ€å·§

### å¿«æ·é”®

- touch åˆ›å»ºæ–‡ä»¶
- open æ‰“å¼€æ–‡ä»¶
- `ctrl`+`space`åˆ‡æ¢è¾“å…¥æ³•
- `F11`æ˜¾ç¤ºæ¡Œé¢
- `ctrl`+`â†‘`/`â†“`
- command + shift + ã€‚æ˜¾ç¤ºéšè—æ–‡ä»¶

### vscode å¿«æ·é”®

- ç§»åŠ¨å…‰æ ‡åˆ°è¡Œé¦–æˆ–è€…è¡Œå°¾ï¼š`command`+`æ–¹å‘é”®`
- ä»¥å•è¯æœªç»´åº¦ç§»åŠ¨å…‰æ ‡ï¼š`option+`+`æ–¹å‘é”®`
- é€‰ä¸­æ–‡æœ¬ï¼šä¸Šè¿°æ“ä½œ+`shift`
- vscode å¤šè¡Œæ³¨é‡Š`option`+`shift`+`A`
- ä»£ç å—æŠ˜å `ctrl`+`shift`+`[`
- è¿”å›ä¸Šä¸€ä½ç½® `Alt` + 'â†'

### è½¯ä»¶

- å‘½ä»¤è¡Œå·¥å…·`iTerm2`

## mpvue

### ç”Ÿå‘½å‘¨æœŸ

- created ç”Ÿå‘½å‘¨æœŸåœ¨å¾®ä¿¡çš„ app åˆ›å»ºæ—¶å°±è¢«è§¦å‘äº†ï¼ˆonLaunchï¼‰ï¼Œä¸ç®¡è¯¥é¡µé¢æœ‰æ²¡æœ‰è¢«è®¿é—®ï¼Œå°½é‡ä¸ä½¿ç”¨ created

- é¡µé¢è¿”å›ä¸Šä¸€çº§é¡µé¢ä¼šè§¦å‘ onUnloadï¼Œä½†æ˜¯å¹¶ä¸ä¼šé”€æ¯ vue å®ä¾‹ï¼Œå³ä¸ä¼šè§¦å‘ destroyed ç”Ÿå‘½å‘¨æœŸ

- ç”Ÿå‘½å‘¨æœŸè§¦å‘é¡ºåº(é¦–æ¬¡è¿›å…¥é¡µé¢æ—¶)

  ```
  onLoad
  onShow
  onReady
  beforeMount
  è‡ªå®šä¹‰ç»„ä»¶created
  è‡ªå®šä¹‰ç»„ä»¶mounted
  mounted
  ```

- éé¦–æ¬¡è¿›å…¥é¡µé¢(ç»„ä»¶ä¸å†ä¼šè¿›è¡Œ created å’Œ mounted)

  ```
  onLoad
  onShow
  onReady
  beforeMount
  mounted
  ```

- ç”±äºé¡µé¢ä¸ä¼šé”€æ¯ï¼Œå¯¼è‡´ data ä¸­çš„æ•°æ®ä¸ä¼šæ¸…æ¥šï¼Œå…·ä½“æŸ¥çœ‹ä¸‹é¢å›¾ç‰‡

  ![](https://raw.githubusercontent.com/3Alan/images/master/img/6.gif)

### `mpvue-echarts`

- mpvue-echarts

<details>
  <summary>è¯¦ç»†ä»£ç </summary>

```vue
<template>
  <div class="container">
    <div class="echarts-wrap">
      <mpvue-echarts
        :echarts="echarts"
        :onInit="initChart"
        canvasId="demo-canvas"
        ref="radar"
      />
    </div>
  </div>
</template>

<script>
let chart = null;
import * as echarts from '../utils/echarts.min.js';
import mpvueEcharts from 'mpvue-echarts';
export default {
  components: {
    mpvueEcharts
  },
  data: {
    echarts,
    radarValue: [],
    radarInit: 0
  },
  onUnload() {
    this.resetData();
  },
  async onLoad() {
    this.initRadar();
  },
  methods: {
    initRadar() {
      if (this.radarInit === 1) {
        let option = {
          radar: [
            {
              indicator: [
                { text: 'ä½“èƒ½è€åŠ›', max: 100 },
                { text: 'å¹³è¡¡æ„Ÿ', max: 100 },
                { text: 'åè°ƒæ€§', max: 100 },
                { text: 'åŠ›é‡', max: 100 },
                { text: 'æŸ”éŸ§æ€§', max: 100 }
              ],
              center: ['50%', '50%'],
              radius: 99,
              startAngle: 90,
              splitNumber: 5,
              shape: 'circle',
              name: {
                formatter: '{value}',
                textStyle: {
                  color: '#4A4A4A'
                }
              },
              splitArea: {
                areaStyle: {
                  color: ['#fffced', '#fffced', '#fffced', '#fffced', '#fffced']
                }
              },
              axisLine: {
                symbol: 'circle',
                symbolSize: [5, 5],
                lineStyle: {
                  color: '#FFBF12'
                }
              },
              splitLine: {
                lineStyle: {
                  color: '#FFBF12'
                }
              }
            }
          ],
          series: [
            {
              name: 'é›·è¾¾å›¾',
              type: 'radar',
              emphasis: {
                lineStyle: {
                  width: 1,
                  color: '#7ED321'
                }
              },
              data: [
                {
                  value: [75, 75, 75, 75, 75],
                  name: 'æ ‡å‡†å€¼',
                  symbol: 'rect',
                  symbolSize: 5,
                  areaStyle: {
                    color: '#D2E986'
                  },
                  lineStyle: {
                    color: '#7ED321'
                  },
                  itemStyle: {
                    opacity: 0
                  }
                },
                {
                  // éœ€è¦åŠ¨æ€ä¿®æ”¹çš„å€¼
                  value: this.radarValue,
                  name: 'å­©å­å€¼',
                  areaStyle: {
                    color: '#F8C01C'
                  },
                  lineStyle: {
                    color: '#FF9F00'
                  },
                  itemStyle: {
                    opacity: 0
                  }
                }
              ]
            }
          ]
        };
        // åœ¨è¿™é‡Œæ”¹å˜optionçš„å€¼
        // option.xxx = 'xxx'
        chart && chart.setOption(option);
      }
    },
    resetData() {
      this.radarValue = [];
    },
    initChart(canvas, width, height) {
      chart = echarts.init(canvas, null, {
        width: width,
        height: height
      });
      canvas.setChart(chart);
      // ç”¨äºè§£å†³echartsåˆå§‹åŒ–æ™šäºonLoadç”Ÿå‘½å‘¨æœŸ
      this.radarInit = 1;
      this.initRadar();
      return chart; // è¿”å› chart åå¯ä»¥è‡ªåŠ¨ç»‘å®šè§¦æ‘¸æ“ä½œ
    }
  }
};
</script>

<style lang="stylus" scoped></style>
```

</details>

### å…¶ä»–

- mpvue è·å–é¡µé¢ä¼ é€’å‚æ•°`this.$root.$mp.query`åœ¨`created`ä¸­è·å–ä¸åˆ°ï¼Œå¯ä»¥åœ¨`mounted`ä¸­è·å–

- åˆ†åŒ…ä¸­å¼•ç”¨ç¬¬ä¸‰æ–¹åº“å¯¼è‡´ä¸»åŒ…ä½“ç§¯è¿‡å¤§ï¼Œè§£å†³æ–¹æ¡ˆ webpack æ‰“åŒ…æ—¶å°†ä¸‰æ–¹åº“æ‰“åŒ…åˆ°åˆ†åŒ…ä¸­

  å…³é”®ä»£ç (ä½¿ç”¨äº†`CopyWebpackPlugin`æ’ä»¶)

```js
// webpack.base.config.js
new CopyWebpackPlugin([
  {
    from: path.resolve(__dirname, '../src/pages/child-evaluation/static'), // åˆ†åŒ…ä¸­èµ„æºçš„è·¯å¾„
    to: path.resolve(config.build.assetsRoot, './pages/child-evaluation/static') // æ‰“åŒ…åçš„åˆ†åŒ…å¯¹åº”çš„è·¯å¾„
  }
]);
```

- iPhoneX åº•éƒ¨é»‘æ¡å…¼å®¹ï¼Œé€šè¿‡`wx.getSystemInfo()`è·å–æœºå‹åˆ¤æ–­ï¼Œå¯¹ iPhoneX åº•éƒ¨åŠ ä¸Š margin æ¥å…¼å®¹

  å…³é”®ä»£ç ï¼š

```js
const modelmes = wx.getStorageSync('modelmes');
this.isIphoneX = modelmes.search('iPhone X') !== -1;
```

## Docker

### å‘½ä»¤

- `docker image ls`æŸ¥çœ‹ image åˆ—è¡¨
- `docker image build -t <tagname> .`build image
- `docker rmi -f <imageId>` ç§»é™¤ image
- `docker run -e var=var -p 3000:3000 --build-arg API_ENV=development <imagename>:<tagname>`è¿è¡Œ

### Dockerfile ä¹¦å†™ç¤ºä¾‹

```dockerfile
# nodeç‰ˆæœ¬å·
FROM node:12-alpine

# docker buildæ—¶ä¼ è¿›æ¥çš„å€¼ docker image build -t <name> --build-arg API_ENV=development .
ARG API_ENV

RUN echo ${API_ENV}

ENV NEXT_PUBLIC_API_ENV=${API_ENV}

# Create app directory
RUN mkdir -p /usr/src/app
WORKDIR /usr/src/app

# Install app dependencies
COPY package*.json /usr/src/app/
RUN npm install

# Bundle app source
COPY . /usr/src/app

RUN npm run build
EXPOSE 3000

CMD [ "npm", "run", "start" ]
```

## ReactNative

### H5 è°ƒèµ· APP

ç›¸å…³åº“ï¼šhttps://github.com/suanmei/callapp-lib

ios é…ç½®ï¼šåœ¨ xcode ä¸­é…ç½®ï¼Œinfo--->URL Typesï¼Œæˆ–è€…é…ç½® `Universal Links` å¯ä»¥ç›´æ¥è°ƒèµ· APP

Androidï¼šé€šè¿‡ scheme æ¥è°ƒèµ· APP

## puppeteer

æˆªå›¾æ¨¡ç³Š

```js
await page.setViewport({
  width: 375,
  height: 1334,
  deviceScaleFactor: 3 // é»˜è®¤æ˜¯1
});
```

## html2canvas ä½¿ç”¨

### é‡åˆ°çš„å‘

- textarea æ— æ³•æ¢è¡Œï¼Œä½¿ç”¨äº†`@nidi/html2canvas`

- ios æˆªå›¾å›¾ç‰‡å…ƒç´ (`<img>`)æ²¡æœ‰æˆªå›¾æˆåŠŸ

  ```javascript
  html2canvas(document.getElementById('poster-content'), {
    onclone: () => {
      return new Promise(resolve => {
        setTimeout(() => {
          resolve();
        }, 400);
      });
    }
  }).then(canvas => {
    canvas.toDataURL('image/png');
  });
  ```

- IOS13.x ç‰ˆæœ¬æ— æ³•ä½¿ç”¨

  å®‰è£…[v1.0.0-rc.4](https://github.com/niklasvh/html2canvas/releases/tag/v1.0.0-rc.4)ç‰ˆæœ¬

## é…ç½® alias

ä¿®æ”¹`jsconfig`æ–‡ä»¶

```js
{
  "compilerOptions": {
    "baseUrl": ".",
    "paths": {
      "@/*": ["./src/*"],
    }
  },
  "exclude": [
    "node_modules"
  ]
}

```

## ç¯å¢ƒå¤„ç†

`npm install --save-dev cross-env `

`cross-env` ç”¨äºå¤„ç†ä¸åŒå¹³å°é—®é¢˜ï¼ˆä¾‹å¦‚ mac å’Œ windowsï¼‰

```json
  "scripts": {
    "serve": "vue-cli-service serve",
    "devbuild": "cross-env NODE_ENV=development vue-cli-service build",
    "build": "cross-env NODE_ENV=production vue-cli-service build"
  },
```

åˆ›å»ºæ–‡ä»¶ç”¨äºå¤„ç†ä¸åŒç¯å¢ƒä¸‹çš„ api

```js
export default {
  production: {
    xxx: 'æ­£å¼ç¯å¢ƒåŸŸå'
  },
  development: {
    xxx: 'æµ‹è¯•ç¯å¢ƒåŸŸå'
  }
};
```

ä½¿ç”¨

```js
import baseURLConfig from 'é…ç½®æ–‡ä»¶';
Vue.prototype.baseURL = baseURLConfig[process.env.NODE_ENV].xxx;
```

## ç§»åŠ¨ç«¯é€‚é…

- postcss-px-to-viewport

  åœ¨æ ¹ç›®å½•ä¸‹æ–°å»ºæ–‡ä»¶ postcss.config,js

  ```js
  module.exports = {
    plugins: {: {},
      'postcss-px-to-viewport': {
        // è§†çª—çš„å®½åº¦ï¼Œå¯¹åº”çš„æ˜¯æˆ‘ä»¬è®¾è®¡ç¨¿çš„å®½åº¦ï¼Œæˆ‘ä»¬å…¬å¸ç”¨çš„æ˜¯375
        viewportWidth: 375,
        // è§†çª—çš„é«˜åº¦ï¼Œæ ¹æ®750è®¾å¤‡çš„å®½åº¦æ¥æŒ‡å®šï¼Œä¸€èˆ¬æŒ‡å®š1334ï¼Œä¹Ÿå¯ä»¥ä¸é…ç½®
        // viewportHeight: 1334,
        // æŒ‡å®š`px`è½¬æ¢ä¸ºè§†çª—å•ä½å€¼çš„å°æ•°ä½æ•°
        unitPrecision: 3,
        // æŒ‡å®šéœ€è¦è½¬æ¢æˆçš„è§†çª—å•ä½ï¼Œå»ºè®®ä½¿ç”¨vw
        viewportUnit: 'vw',
        // æŒ‡å®šä¸è½¬æ¢ä¸ºè§†çª—å•ä½çš„ç±»ï¼Œå¯ä»¥è‡ªå®šä¹‰ï¼Œå¯ä»¥æ— é™æ·»åŠ ,å»ºè®®å®šä¹‰ä¸€è‡³ä¸¤ä¸ªé€šç”¨çš„ç±»å
        selectorBlackList: ['.ignore'],
        // å°äºæˆ–ç­‰äº`1px`ä¸è½¬æ¢ä¸ºè§†çª—å•ä½ï¼Œä½ ä¹Ÿå¯ä»¥è®¾ç½®ä¸ºä½ æƒ³è¦çš„å€¼
        minPixelValue: 1,
        // å…è®¸åœ¨åª’ä½“æŸ¥è¯¢ä¸­è½¬æ¢`px`
        mediaQuery: false
      }
    }
  }
  ```

## ç§»åŠ¨ç«¯ä¿å­˜å›¾ç‰‡åˆ°æœ¬åœ°

https://www.cnblogs.com/zhangkaiqiang/p/8183926.html

## nvm ç®¡ç†å¤š node ç‰ˆæœ¬

https://github.com/coreybutler/nvm-windows/releases

åˆ‡æ¢é•œåƒæºï¼šnpm_mirror: https://npm.taobao.org/mirrors/npm/
https://cloud.tencent.com/developer/article/1812323

### å¸¸ç”¨å‘½ä»¤

- nvm list
- nvm list available
- nvm install [node ç‰ˆæœ¬å·]
- nvm use [node ç‰ˆæœ¬å·]

## å¤šä»“åº“çš„é—®é¢˜

å¦‚æœä¸€ä¸ªé¡¹ç›®å¼•ç”¨äº†ç§æœ‰çš„ç»„ä»¶åº“ï¼Œé‚£ä¹ˆåœ¨ç»„ä»¶åº“ä¿®æ”¹åéœ€è¦é‡æ–°å‘å¸ƒ npm å¹¶åœ¨é¡¹ç›®ä¸­æ›´æ–°ç‰ˆæœ¬æ‰èƒ½è°ƒè¯•ã€‚ä½¿ç”¨[npm link](https://docs.npmjs.com/cli/v6/commands/npm-link)å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚

## typescript ç›¸å…³

- åŠ¨æ€è®¾ç½® state å€¼æ—¶ typescript ç±»å‹æ¨å¯¼é—®é¢˜ï¼šhttps://github.com/DefinitelyTyped/DefinitelyTyped/issues/26635
- export type çš„ç›¸å…³[é—®é¢˜](https://devblogs.microsoft.com/typescript/announcing-typescript-3-8/#type-only-imports-exports)

## `git` å›é€€ä¸Šæ¬¡çš„ `commit`

`git reset --soft HEAD^`

## git æ–‡ä»¶å¤§å°å†™è¢«å¿½ç•¥çš„é—®é¢˜

`git config core.ignorecase false`

## node-sass å®‰è£…é—®é¢˜

```
yarn config set sass_binary_site http://cdn.npm.taobao.org/dist/node-sass -g
```

## html email

- ç”±äºä¸åŒé‚®ä»¶å®¢æˆ·ç«¯å¯¹ `css` çš„å…¼å®¹æ€§ä¸åŒï¼Œå¯¼è‡´ `css` å¾ˆå¤šå±æ€§ä¸èƒ½ä½¿ç”¨ï¼Œcss å…¼å®¹æ€§æŸ¥è¯¢ [campaignmonitor](https://www.campaignmonitor.com/css/) [caniemail](https://www.caniemail.com/)
- æœ‰äº›å®¢æˆ·ç«¯ä¸æ”¯æŒ `<head><style></style></head>`ï¼Œæ‰€ä»¥æ ·å¼ä½¿ç”¨è¡Œå†…æ ·å¼ï¼Œ[è½¬åŒ–å·¥å…·](https://putsmail.com/inliner) [è½¬åŒ–å·¥å…·](https://automattic.github.io/juice/)
- å¯ä»¥ä½¿ç”¨ `nodemailer` æ¥æµ‹è¯•å‘é€æ•ˆæœ
- ä½¿ç”¨ `<table>` å®Œæˆï¼Œæ¯’ç˜¤ `outlook` ğŸ˜’
- [å¯è§†åŒ–å·¥å…·](https://github.com/unlayer/react-email-editor)

> https://stackoverflow.design/email/base/mso/ > https://www.emailonacid.com/blog/article/email-development/which-code-should-i-include-in-every-email/

## æµ‹è¯•

### jest æ¯æ¬¡æµ‹è¯•åæ²¡æœ‰æ¸…ç©º jsdom çš„é—®é¢˜

https://stackoverflow.com/questions/42805128/does-jest-reset-the-jsdom-document-after-every-suite-or-test
