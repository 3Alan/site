---
title: 发布订阅-观察者模式
tags:
  - 设计模式
keywords:
  - 发布订阅模式
  - 观察者模式
  - pub-sub
  - observer
date: 2023-02-11
description: 实现一个简易的事件派发器
authors: Alan
---

什么是发布订阅以及观察者模式以及他们之间的区别

<!--truncate-->

import { PubSubScreenExample, ObserverExample } from '../src/contentExamples/pubSub';

:::tip
请使用 PC 阅读该文章以获得最好的阅读体验
:::

## 观察者模式

这一天，小明像往常一样去门口的便利店买酸奶，可谁知老板有事歇业了，于是他拨通了店门上的电话，老板说等开门了会打电话通知他，于是老板在记事本中保存了小明的电话。2 天后小明接到了老板开门的电话，于是他立刻前往便利店去购买自己最爱吃的酸奶。

在上面这个场景中，观察者（Observer）就是小明，被观察者（Subject）就是老板，而老板记事本中记录的电话就是观察者清单（ObserverList）

<ObserverExample />

## 发布订阅模式

小明在回家的路上看到门口贴着一个广告，上面写着二手交易软件并附上了一个 APP 下载二维码，正好小明最近因为居家办公缺少一个屏幕，于是他抱着试一试的态度下载了这个 APP。打开 APP 一看，用户只需要在 APP 上发上自己的需求或者要出手的二手物品，平台就会帮你寻找买家或者卖家并且保证双方的隐私，于是小明在 APP 上上传了自己的需求等待平台通知他。

小红正好有一个闲置的屏幕于是在 APP 上发布了出售需求。

在小红发布需求后，系统匹配到有人需要屏幕于是发送通知给相应的人，于是小明接收到了通知。

上面的场景中，小明作为订阅者（sub）订阅了屏幕的需求，而小红则作为发布者（pub）发布了屏幕的需求，APP 则作为事件总线（eventBus）来处理这些需求，对于小红和小明而言，他们是不知道双方的相关信息的，所有的交流都是通过 APP 作为中间者来完成的，实现了两者间的解耦。

<PubSubScreenExample />

## 区别

可以发现发布订阅模式的场景中，小明和 APP 的关系和观察者模式很相似
