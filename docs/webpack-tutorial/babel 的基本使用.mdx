---
slug: babel
title: webpack babel çš„åŸºæœ¬ä½¿ç”¨
sidebar_label: babel çš„åŸºæœ¬ä½¿ç”¨
tags:
  - webpack4.0
description: webpack å…¥é—¨æ•™ç¨‹ï¼Œä»‹ç»äº† webpack babel çš„åŸºæœ¬ä½¿ç”¨åŠé…ç½®ï¼Œæ‰“åŒ… react é¡¹ç›®ï¼Œå¤„ç† ES6 è¯­æ³•
keywords:
  - webpack
  - webpack å…¥é—¨æ•™ç¨‹
  - webpack bebel
  - polyfill
  - preset
references:
  - name: ä»åŸºç¡€åˆ°å®æˆ˜ æ‰‹æŠŠæ‰‹å¸¦ä½ æŒæ¡æ–°ç‰ˆWebpack4.0
    url: 'https://coding.imooc.com/class/chapter/316.html#Anchor'
  - name: webpackå®˜ç½‘
    url: 'https://webpack.js.org/'
date: 2020-05-17 10:05:14
updated: 2020-05-16 13:33:00
sidebar_position: 4
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

## å¤„ç† ES6 è¯­æ³•

æˆ‘ä»¬å…ˆç”¨ ES6 å†™ä¸€äº›ä»£ç 

```js
const name = 'Alan';
const list = [1, 8, 4, 6];

const resultList = list.filter(item => item > 5);

new Promise(() => {
  console.log('666');
});

console.log(resultList);
```

`npm run build`æ‰“åŒ…çœ‹ä¸€ä¸‹ chrome æ•ˆæœ

![image-20200520142019038](https://raw.githubusercontent.com/3Alan/images/master/img/image-20200520142019038.png)

å¥ˆä½•è¿™ä¸ªä¸–ç•Œä¸Šè¿˜æœ‰ IE è¿™ç§ä¸œè¥¿ ğŸ˜£ï¼ŒIE ä¸Šçœ‹ä¸€ä¸‹æ•ˆæœ

![image-20200520142207197](https://raw.githubusercontent.com/3Alan/images/master/img/image-20200520142207197.png)

å¯ä»¥çœ‹ä¸€ä¸‹æŠ¥é”™çš„åœ°æ–¹ï¼š

```js
eval(
  "const name = 'Alan';\r\nconst list = [1, 8, 4, 6];\r\n\r\nconst resultList = list.filter(item => item > 5);\r\n\r\nnew Promise(() => {\r\n  console.log('666');\r\n})\r\n\r\nconsole.log(resultList);\r\n\n\n//# sourceURL=webpack:///./src/index.js?"
);
```

**çœ‹æ¥ IE æ˜¯è¯†åˆ«ä¸äº† ES6 è¯­æ³•çš„**ï¼Œé‚£æˆ‘ä»¬è¿™é‡Œå°±è¦å€ŸåŠ© babel å¤„ç†äº†ã€‚

```js
npm install --save-dev babel-loader @babel/core @babel/preset-env
```

`@babel/preset-env`æŠŠ ES6 è½¬åŒ–ä¸º ES5

`@babel/core`babel æ ¸å¿ƒå†…å®¹

é…ç½® webpack

```js
{
  test: /\.js$/,
  exclude: /node_modules/, // ä¸å¯¹node_modulesä¸‹çš„jsæ–‡ä»¶å¤„ç†
  loader: 'babel-loader',
  options: {
    presets: ['@babel/preset-env']
  }
},
```

å†æ‰“åŒ…çœ‹ä¸€çœ‹

![image-20200520143428061](https://raw.githubusercontent.com/3Alan/images/master/img/image-20200520143428061.png)

æ‰“åŒ…åçš„ index.js æ–‡ä»¶

```js
var name = 'Alan';
var list = [1, 8, 4, 6];
var resultList = list.filter(function (item) {
  return item > 5;
});
new Promise(function () {
  console.log('666');
});
console.log(resultList);
```

è™½ç„¶å¤„ç†äº†ä¸€äº› ES6 è¯­æ³•ï¼ˆç®­å¤´å‡½æ•°ï¼Œconstï¼‰ï¼Œä½†æ˜¯åƒ filter å’Œ Promise è¿˜æ˜¯æ²¡æœ‰å¤„ç†çš„ã€‚

è¿™é‡Œå°±è¦ä½¿ç”¨`@babel-polyfill`ï¼Œå®ƒä¼šæ¨¡æ‹Ÿä¸€ä¸ª ES5 ç¯å¢ƒ

```
npm install --save @babel/polyfill
```

å®‰è£…ååœ¨æ–‡ä»¶å¼€å¤´å¼•å…¥å°±å¯ä»¥äº†

```js
import '@babel/polyfill';

const name = 'Alan';
const list = [1, 8, 4, 6];

const resultList = list.filter(item => item > 5);

new Promise(() => {
  console.log('666');
});

console.log(resultList);
```

å†æ¬¡æ‰“åŒ…è¿è¡Œ

![image-20200520144125415](https://raw.githubusercontent.com/3Alan/images/master/img/image-20200520144125415.png)

è™½ç„¶æ•ˆæœå®Œæˆäº†ï¼Œä½†æ˜¯å¯¹æ¯”ä¸€ä¸‹æ²¡ä½¿ç”¨`@babel/polyfil`l å’Œä½¿ç”¨äº†`@babel/polyfill`æ‰“åŒ…åçš„å¤§å° ğŸ˜®

![image-20200520144511050](https://raw.githubusercontent.com/3Alan/images/master/img/image-20200520144511050.png)

å°±å¼•å…¥äº†ä¸€ä¸ª`@babel-polyfill`ï¼Œä½“ç§¯å°±å¢åŠ äº†è¿™ä¹ˆå¤šï¼Ÿ

å…¶å®æ˜¯å› ä¸º`@babel-polyfill`æ¨¡æ‹Ÿäº†æ‰€æœ‰çš„ ES5 ç¯å¢ƒï¼Œè€Œæˆ‘ä»¬è¿™é‡Œåªä½¿ç”¨äº† Promise å’Œ filterï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡é…ç½®`useBuiltIns`è®©å®ƒåªæ¨¡æ‹Ÿæˆ‘ä»¬ä½¿ç”¨åˆ°çš„ã€‚

é…ç½®äº†`useBuiltIns`åï¼Œå®ƒæ˜¯ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬å¼•å…¥`@babel/polyfill`æ‰€ä»¥è¿™é‡Œæˆ‘ä»¬æ— éœ€å†å¼•å…¥ã€‚

```js
{
  test: /\.js$/,
  exclude: /node_modules/, // ä¸å¯¹node_modulesä¸‹çš„jsæ–‡ä»¶å¤„ç†
  loader: 'babel-loader',
  options: {
    presets: [['@babel/preset-env', {
      useBuiltIns: 'usage'
    }]]
  }
},
```

```js
main.js   68.6 KiB    main  [emitted]  main
```

å†çœ‹ä¸€ä¸‹æ‰“åŒ…åçš„æ–‡ä»¶å°äº†å¾ˆå¤šæœ‰æ²¡æœ‰ï¼Ÿ

babel çš„é…ç½®æ˜¯å¯ä»¥å•ç‹¬æ”¾åœ¨`.babelrc`æ–‡ä»¶ä¸­çš„ï¼Œç›´æ¥å°† options ä¸­çš„å†…å®¹æ”¾åˆ°.babelrc ç›®å½•ä¸‹å³å¯

```json
{
  "presets": [
    [
      "@babel/preset-env",
      {
        "useBuiltIns": "usage"
      }
    ]
  ]
}
```

## ä½¿ç”¨@babel/preset-react æ‰“åŒ… React æ–‡ä»¶

```
npm install --save-dev @babel/preset-react
```

<Tabs>
<TabItem value=".babelrc" label=".babelrc">

```json
{
  "presets": [
    [
      "@babel/preset-env",
      {
        "useBuiltIns": "usage"
      }
    ],
    "@babel/preset-react"
  ]
}
```

</TabItem>
<TabItem value="index.js" label="index.js">

```js
import React, { Component } from 'react';
import ReactDom from 'react-dom';

class App extends Component {
  render() {
    return <div>Hello React</div>;
  }
}

ReactDom.render(<App />, document.getElementById('root'));
```

</TabItem>

</Tabs>

è¿™é‡Œæœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„ä¸€ä¸‹ï¼Œpresets é¡ºåºæ˜¯ä»åå¾€å‰çš„ï¼Œå’Œ css-loader ä¸€æ ·ï¼Œä¹Ÿå°±æ˜¯ js æ–‡ä»¶æ˜¯å…ˆè¢«`@babel/preset-react`å¤„ç†çš„å†è¢«`@babel/preset-env`å¤„ç†çš„ã€‚

## æ€»ç»“ä½¿ç”¨çš„ babel

`@babel/preset-react`å¤„ç† react çš„ jsx è¯­æ³•

`@babel-polyfill`å¤„ç†ä½ç‰ˆæœ¬æµè§ˆå™¨æ— æ³•å¤„ç†çš„è¯­æ³•ï¼Œç±»ä¼¼ Promiseã€Array.fromã€Object.assign

`@babel/preset-env`æŠŠ ES6 è½¬åŒ–ä¸º ES5

`@babel/core`babel æ ¸å¿ƒå†…å®¹

`useBuiltIns:usage`æŒ‰éœ€å¼•å…¥

:::info
æ›´å¤šé…ç½®å‚è€ƒ[babel å®˜ç½‘](https://babeljs.io/docs/en/)
:::
