---
slug: trouble-in-work
title: Problems I Encountered at Work
tags:
  - Work
categories:
  - Front-end
  - Work
date: 2021-01-20T12:09:47.000Z
keywords:
  - React
  - Vue Scrolling Penetration
  - Mac Usage Tips
  - Docker Containers
  - WeChat Mini Programs
  - Mobile Adaptation Solutions
description: >-
  Mainly records some of the difficulties I encountered and the solutions during
  my one year of work.
authors: Alan
summary: >-
  Difficulties and solutions encountered during one year of work:


  1. Scrolling penetration issue in Vue, solved using `@touchmove.stop`.

  2. When using `useEffect` in React, use an arrow function to avoid memory
  leaks.

  3. When using `defaultProps` in React, you need to define the default value in
  the component's `propTypes`.

  4. Line break issue with the `pre` element in CSS, solved using `white-space:
  pre-wrap; word-break: break-all;`.

  5. Mobile `hover` issue, solved using `pointer-events: none`.
ai_translation: true
---

Mainly records some of the difficulties I encountered and the solutions during my one year of work.

<!-- truncate -->

## Vue

### Scrolling Penetration

`@touchmove.stop`

## React

- switch in react-router-dom: https://segmentfault.com/a/1190000022444683

- Localstorage and sessionstorage lifecycle

- Use an arrow function in useEffect

  ```jsx
  useEffect(() => {
    (async () => {
      await xxx;
    })();
  }, []);
  ```

### Using defaultProps in React

https://stackoverflow.com/questions/37282159/default-property-value-in-react-component-using-typescript

## CSS

### Pre element not wrapping issue

```css
pre {
  white-space: pre-wrap;
  word-break: break-all;
}
```

### Mobile hover issue

https://stackoverflow.com/questions/23885255/how-to-remove-ignore-hover-css-style-on-touch-devices

### Text decoration propagation issue

https://stackoverflow.com/questions/40829232/why-does-the-text-decoration-none-not-work-inside-p

## To be learned

- Git's fast-forword
- [cherry-pick](https://ruanyifeng.com/blog/2020/04/git-cherry-pick.html)
- [github fork](https://www.zhihu.com/question/20431718)

## Mac usage and vscode tips

### Shortcuts

- Touch to create a file
- Open to open a file
- `ctrl`+`space` to switch input method
- `F11` to show desktop
- `ctrl`+`↑`/`↓`
- command + shift + 。 to show hidden files

### Terminal proxy

```
vim ~/.zshrc
```

Add configuration to set aliases

```
alias proxy='export https_proxy=http://127.0.0.1:7890 http_proxy=http:/127.0.0.1:7890 all_proxy=socks5://127.0.0.1:7890'
alias unproxy='unset http_proxy https_proxy all_proxy'
alias ip='curl ipinfo.io'
```

```
source ~/.zshrc
```

Open proxy

```
proxy
```

Verify

```
curl -vv https://www.google.com/
```

### Vscode shortcuts

- Move cursor to the beginning or end of a line: `command`+`arrow key`
- Move cursor by word: `option+`+`arrow key`
- Select text: Above operation + `shift`
- Vscode multi-line comment `option`+`shift`+`A`
- Code block collapse `ctrl`+`shift`+`[`
- Return to previous position `Alt` + '←'
- Merge code into a single line command `Join Lines`

### Software

- Command line tool `iTerm2`

## Mpvue

### Lifecycle

- The created lifecycle is triggered when the WeChat app is created (onLaunch), regardless of whether the page has been visited or not. Try not to use created.

- When a page returns to the previous page, onUnload is triggered, but the vue instance is not destroyed, i.e. the destroyed lifecycle is not triggered.

- Lifecycle trigger order (when entering the page for the first time)

  ```
  onLoad
  onShow
  onReady
  beforeMount
  Custom component created
  Custom component mounted
  mounted
  ```

- Non-first entry into the page (components will no longer be created and mounted)

  ```
  onLoad
  onShow
  onReady
  beforeMount
  mounted
  ```

- Since the page is not destroyed, the data in data will not be cleared. See the picture below for details.

  ![](https://raw.githubusercontent.com/3Alan/images/master/img/6.gif)

### `mpvue-echarts`

- mpvue-echarts

<details>
  <summary>Detailed code</summary>

```vue
<template>
  <div class="container">
    <div class="echarts-wrap">
      <mpvue-echarts :echarts="echarts" :onInit="initChart" canvasId="demo-canvas" ref="radar" />
    </div>
  </div>
</template>

<script>
let chart = null;
import * as echarts from '../utils/echarts.min.js';
import mpvueEcharts from 'mpvue-echarts';
export default {
  components: {
    mpvueEcharts
  },
  data: {
    echarts,
    radarValue: [],
    radarInit: 0
  },
  onUnload() {
    this.resetData();
  },
  async onLoad() {
    this.initRadar();
  },
  methods: {
    initRadar() {
      if (this.radarInit === 1) {
        let option = {
          radar: [
            {
              indicator: [
                { text: '体能耐力', max: 100 },
                { text: '平衡感', max: 100 },
                { text: '协调性', max: 100 },
                { text: '力量', max: 100 },
                { text: '柔韧性', max: 100 }
              ],
              center: ['50%', '50%'],
              radius: 99,
              startAngle: 90,
              splitNumber: 5,
              shape: 'circle',
              name: {
                formatter: '{value}',
                textStyle: {
                  color: '#4A4A4A'
                }
              },
              splitArea: {
                areaStyle: {
                  color: ['#fffced', '#fffced', '#fffced', '#fffced', '#fffced']
                }
              },
              axisLine: {
                symbol: 'circle',
                symbolSize: [5, 5],
                lineStyle: {
                  color: '#FFBF12'
                }
              },
              splitLine: {
                lineStyle: {
                  color: '#FFBF12'
                }
              }
            }
          ],
          series: [
            {
              name: '雷达图',
              type: 'radar',
              emphasis: {
                lineStyle: {
                  width: 1,
                  color: '#7ED321'
                }
              },
              data: [
                {
                  value: [75, 75, 75, 75, 75],
                  name: '标准值',
                  symbol: 'rect',
                  symbolSize: 5,
                  areaStyle: {
                    color: '#D2E986'
                  },
                  lineStyle: {
                    color: '#7ED321'
                  },
                  itemStyle: {
                    opacity: 0
                  }
                },
                {
                  // 需要动态修改的值
                  value: this.radarValue,
                  name: '孩子值',
                  areaStyle: {
                    color: '#F8C01C'
                  },
                  lineStyle: {
                    color: '#FF9F00'
                  },
                  itemStyle: {
                    opacity: 0
                  }
                }
              ]
            }
          ]
        };
        // Change the value of option here
        // option.xxx = 'xxx'
        chart && chart.setOption(option);
