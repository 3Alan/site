---
slug: network
title: Computer Network
date: 2021-02-24T23:14:08.000Z
tags:
  - Front-end knowledge system
keywords:
  - Front-end knowledge system
  - Computer Network
description: Front-end knowledge system - Computer Network
displayed_sidebar: interviewSidebar
sidebar_label: Computer Network
sidebar_position: 3
summary: >-
  The seven-layer network protocol, what happens from entering a URL to page
  loading, HTTP protocol and its characteristics, HTTP request methods, the
  difference between GET and POST, commonly used status codes, HTTP2 protocol,
  security (XSS, CSRF, cross-domain), caching.
ai_translation: true
---

## Seven-layer network protocol

Quoting a picture from the Internet, please contact me to delete it if it infringes ðŸ˜‚

![image-20200601083205320](https://raw.githubusercontent.com/3Alan/images/master/img/image-20200601083205320.png)

## What happens from entering a URL to page loading

1. The browser checks whether the current URL exists in the cache and compares whether the cache is expired
2. Get the IP address according to DNS resolution
3. Establish a TCP connection (3-way handshake)
4. HTTP sends a request
5. The server processes the request and returns data
6. Render the page and build the DOM tree
7. Close the TCP connection (4-way handshake)

## HTTP

HTTP(HyperText Transfer Protocol) is an application layer protocol implemented based on TCP. HTTP is a **stateless** protocol, that is, the client and the server do not need to establish a persistent connection. When the client sends a request, the connection is closed when the server returns a response.

When requesting a url `www.baidu.com`, first `DNS` resolves the IP address corresponding to the address, and then encapsulates the relevant information into an HTTP request data packet. Then TCP (three-way handshake) establishes a connection, sends an HTTP request after the connection is successful, and closes the TCP connection after the server responds. If the browser or server adds `Connection:keep-alive` to the header, the TCP still saves the connection after sending the information, which can reduce the number of TCP connections and improve performance and server throughput. HTTP1.1 is enabled by default.

### Disadvantages

- Commonly used plaintext is not secure
- Identity is not verified, and impersonation may be encountered
- The integrity of the message cannot be verified, and it may be tampered with

It was mentioned earlier that HTTP is a stateless protocol, so how can it have a state?

session and cookie

#### cookie (key/value form)

The client returns the cookie attached to the `Set-Cookie` or `Set-Cookie2` in the response header. The cookie is stored on the client side and sent to the server along with the cookie the next time it is accessed

**Cookie's homology and cross-domain:**

Cookies only care about the domain name and ignore the protocol and port, which means that different protocols or ports do not belong to cross-domain

#### Session mechanism (maintained by the server), based on cookie work

Session and sessionId (returned to the client)

When a client accesses the server, it first checks whether the request includes a sessionId. If yes, retrieve the corresponding session through the sessionId and perform a series of operations. If there is no sessionId, create a session with the corresponding sessionId stored on the client side by cookie. When the client accesses the server later, it maintains the HTTP status through this sessionId.

### HTTPS

`HTTPS = HTTP + TLS/SSL`

HTTP encrypted with greater security, using `SSL/TLS` to encrypt data packets;

`TLS/SSL`: Transport Layer Security

**TSL/SSL** involves three algorithms:

- Hash function Hash: MD5, SHA1, SHA256 (the function is unidirectional and irreversible, encrypting the transmitted information and information digest)
- Symmetric encryption: AES-CBC, DES, 3DES, AES-GCM
- Asymmetric encryption: RSA (divided into public key and private key)

**TSL working mode:**

First use **asymmetric encryption algorithm for encryption** to communicate, the server returns the public key and negotiates the symmetric encryption key to encrypt the communication.

**RSA's potential risks/disadvantages:**

- Time-consuming
- Cannot ensure the legality of the server's identity (whether the public key is returned by the server) (because the public key does not contain server information), because the server can be hijacked when distributing the public key

:::info Example

When C (client) and S (server) communicate, H (hijacker) intercepts the communication between S and C. H gives C its own public key pub_H. When C sends a request to S, it is actually encrypted with pub_H, so H can Get the message sent by C. In this way, the communication originally between C and S has now become the communication between C and H.

:::

**Solution:** Introduce a third-party certification authority (certificate + signature (to prevent the certificate from being tampered with when the server returns the certificate)), verify the information of the public key owner and then issue a certificate, referred to as `PKI system`

1. S submits the public key and company-related information to a third-party agency
2. CA (ie third-party certification authority) verifies the correctness of S information through a series of channels
3. After the audit is passed, CA issues a certificate to S. The certificate information includes: S's public key, S company-related information, CA's information, validity period, certificate serial number (all this information is displayed in plaintext). Signature (use the hash function to calculate the information digest of the public plaintext information, and then use CA's private key to encrypt the information digest)
4. C sends a request to S, S returns the certificate
5. C reads the plaintext information in the certificate, uses the same hash function to calculate the information digest, and then decrypts the signature using the corresponding public key of CA, and compares the information digest in the certificate to verify the legality of the certificate/public key.

:::info Summary

- Use the hash function to calculate the information digest and use the public key provided by CA to decrypt the signature to obtain the information digest, and compare the information digest in the certificate to verify the legality of the certificate
- The client generates a key CPrivate, and uses the server's public key SPublic to encrypt CPrivate and send it to the server
- The server uses SPrivate to decrypt the information to get CPrivate
- All subsequent communications depend on CPrivate

:::

## HTTP request method

| Method | Description |
| :---- | :--------------------------------------------------------------------------------------------------------------------------------------- |
| GET | Request the specified page information and return the entity body. |
| HEAD | Similar to GET request, except that there is no specific content in the returned response, which is used to get the header |
| POST | Submit data to the specified resource for processing (such as submitting a form or uploading a file). The data is contained in the request body. POST requests may result in the creation of new resources and/or the modification of existing resources. |
| PUT | The data transmitted from the client to the server replaces the content of the specified document. |
| DELETE | Request the server to delete the specified page. |
| CONNECT | Reserved for proxy servers that can convert connections to pipeline mode in the HTTP/1.1 protocol. |
| OPTIONS | Allows the client to view the performance of the server. |
| TRACE | Echo the request received by the server, mainly used for testing or diagnosis. |
| PATCH | It is a supplement to the PUT method, used to partially update known resources. |

## Difference between GET and POST

### GET

- Can be cached
- Will be retained in browser history
- Request data length is limited
- Semantically used to retrieve data
- Poor security
- Data sent in URL

### POST

- Data is invisible in the message body
- Not cached
- Not retained in browser history
- No limit on request data length
- Safer than GET
- Semantically submit data

## Commonly used status codes

| Category | Category description |
| :---- | :----------------------------- |
| 1\*\* | Information, the server receives the request and requires the requester to continue the operation |
| 2\*\* | Success, the operation was successfully received and processed |
| 3\*\* | Redirect, further action is required to complete the request |
| 4\*\* | Client error, the request contains a syntax error or cannot complete the request |
| 5\*\* | Server error, an error occurred on the server while processing the request |

| Status code | Description |
| :----- | :--------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 200 | Request successful |
| 204 | No content. The server processed successfully, but no content was returned |
| 301 | Permanent move. The requested resource has been permanently moved to a new URI. The returned information will include the new URI, and the browser will automatically redirect to the new URI. Any new requests should use the new URI instead |
| 302 | Temporary move. Similar to 30
